<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/static/css/joinstyle.css">
    <title>회원가입</title>
    <!-- 아이콘 font awesome 연결-->
    <script src="https://kit.fontawesome.com/ff113c8133.js" crossorigin="anonymous"></script>
    <!--ajax 연결 -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            // id 값을 입력했을 때
            $('#id').blur(function () {
                let id = $('#id').val()
                // 입력받은 값 중 입력하지 않은 값이 있을 경우
                if (id == "") {
                    $('#id_check').html('<i class="fa-solid fa-circle-exclamation"></i>')
                    return;
                } else {
                    $('#id_check').text('')
                }
                // 정규 표현식을 이용한 아이디 이메일 형식 제한
                let id_regExp = /^[a-zA-Z0-9]{4,12}$/;
                if (!id_regExp.test(id)) {
                    $('#id_check').html('<i class="fa-regular fa-circle-xmark"></i>')
                    return;
                } else {
                    $('#id_check').html('<i class=\"fa-regular fa-circle-check\"></i>')
                    return;
                }


                // // 정규 표현식을 이용한 닉네임 양식 제한
                // function is_nickname(asValue) {
                //     var regExp = /^(?=.*[a-zA-Z])[-a-zA-Z0-9_.]{2,10}$/;
                //     return regExp.test(asValue);
                // }
                //
                // if (!is_nickname(nick)) {
                //     alert('닉네임은 2자에서 10자까지 입니다..')
                //     return;
                // }
                //
                // // 정규 표현식을 이용한 비밀번호 양식 제한
                // function is_password(asValue) {
                //     var regExp = /^(?=.*\d)(?=.*[a-zA-Z])[0-9a-zA-Z!@#$%^&*]{8,20}$/;
                //     return regExp.test(asValue);
                // }
                //
                // if (!is_password(pwd)) {
                //     alert('비밀번호는 8-20자까지입니다.')
                //     return;
                // }
                //
                //
                // if (name == "") {
                //     alert('이름을 입력해 주세요')
                //     $("#name").focus()
                //     return;
                // }
                // if (is_email(id))
                //     if (nick == "") {
                //         alert('닉네임을 입력해 주세요')
                //         $("#nickname").focus()
                //         return;
                //     }
                // if (pwd == "") {
                //     alert('패스워드를 입력해 주세요')
                //     $("#pwd").focus()
                //     return;
                // }
            })
        })

        function join() {
            // 입력한 값들 가져와 변수에 저장
            let id = $('#id').val()
            let name = $('#name').val()
            let nick = $('#nickname').val()
            let pwd = $('#pwd').val()
            $.ajax({
                type: "POST",
                url: "/join",
                data: {'id_give': id, 'name_give': name, 'nick_give': nick, 'pwd_give': pwd},
                success: function (response) {
                    // 아이디가 중복일 경우
                    if (response['exist']) {
                        alert(response["msg"])
                    } else {
                        alert(response["msg"])
                        window.location.replace('/')
                    }

                }
            })
        }
    </script>
</head>
<body>
<main class="container">
    <article class="article">
        <div class="box-join"> <!-- join box -->
            <div class="box-logo"> <!-- logo img -->
                <img alt="Instagram" class="img-logo" src="/static/images/logo.png">
            </div>
            <h2 class="text-info">
                친구들의 사진과 동영상을 보려면 가입하세요.
            </h2>
            <div class="box-input"> <!-- input box -->
                <input class="input-join" type="text" id="id" placeholder="휴대폰 번호 또는 이메일 주소">
                <span id="id_check"></span><!-- input id -->
                <input class="input-join" type="text" id="name" placeholder="성명"> <!-- input name -->
                <input class="input-join" type="text" id="nickname" placeholder="사용자 이름"> <!-- input nickname -->
                <input class="input-join" type="password" id="pwd" placeholder="비밀번호"> <!-- input pw -->
            </div>
            <div class="box-button"> <!-- button box -->
                <button class="button" type="button" onclick="join()">가입</button> <!-- button -->
            </div>
        </div>
        <div class="box-login"> <!--login box-->
            <p class="text-signin">
                계정이 있으신가요?
                <a href="/move_login">로그인</a>
            </p>
        </div>
    </article>
</main>
<footer>
    <div> <!-- line first -->
    </div>
    <div> <!-- line second -->
    </div>
    <div> <!-- copyright -->
    </div>
</footer>
</body>
</html>

